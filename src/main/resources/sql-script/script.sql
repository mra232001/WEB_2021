drop schema if exists webproject
    cascade;
create schema webproject;
set search_path = webproject;

drop table if exists users;

Create table users(
    id int generated by default as identity ,
    username varchar(100) not null,
    password varchar(80) not null,
    id_role int,
    primary key (id)
);

create table routine(
    id int generated by default as identity ,
    name varchar(100) not null unique,
    duration time,
    volumn real,
    id_owner int references users(id),
    like_number int,
    comment_number int,
    primary key (id),
    constraint fk_owner foreign key (id_owner) references users(id)
                    on delete no action on update no action
);

create table exercise(
    id int generated by default as identity,
    name varchar(100) not null,
    description varchar(1000) not null,
    equipment varchar(30),
    primary key (id)
);

create table comment(
    id int generated by default as identity,
    description varchar(100),
    ownerId int references users(id),
    routineId int references routine(id),
    primary key (id)
);


create table role(
    id int generated by default as identity ,
    name varchar(100) not null,
    primary key (id)
);

insert into role(name) values ('ROLE_USER'),('ROLE_ADMIN');
